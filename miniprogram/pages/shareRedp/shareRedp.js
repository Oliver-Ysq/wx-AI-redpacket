"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
const util_1 = require("../../utils/util");
const app = getApp();
Page({
    data: {
        renderOver: false,
    },
    share: util_1.throttle(() => {
        console.log("share");
    }, 1000),
    setNewRedp: util_1.throttle(() => {
        wx.reLaunch({
            url: "/pages/index/index",
        });
    }, 1000),
    test() {
        const that = this;
        if (!that.data.userInfo)
            return;
        wx.navigateTo({
            url: `/receiveRedp/receiveRedp?question=${that.data.question}&quesList=${that.data.quesList}&nickName=${that.data.userInfo.nickname}&avaUrl=${that.data.userInfo.avatarUrl}&redid=${that.data.redid}&activeType=${that.data.activeType}&actionType=${that.data.actionType}`,
            fail(err) {
                console.log(err);
            },
        });
    },
    onLoad: function (options) {
        console.log(options);
        const that = this;
        that.setData({
            userInfo: {
                nickname: options.nickName,
                avatarUrl: options.avaUrl,
            },
            question: options.question,
            quesList: options.quesList,
            activeType: parseInt(options.activeType),
            actionType: !options.actionType
                ? undefined
                : parseInt(options.actionType),
            type: app.globalData.typeList[parseInt(options.activeType)],
            redid: parseInt(options.redid),
        });
        wx.getSystemInfo({
            success(res) {
                that.setData({
                    pixelRatio: res.pixelRatio,
                    width: 285 * res.pixelRatio,
                    height: 400 * res.pixelRatio,
                });
            },
        });
        wx.showShareMenu({
            withShareTicket: true,
            menus: ["shareAppMessage"],
        });
    },
    onImgOK(e) {
        console.log(e.detail.path);
        this.setData({
            imgurl: e.detail.path,
        });
    },
    onImgErr(err) {
        console.log(err);
        wx.showToast({
            title: "生成失败",
            icon: "none",
        });
    },
    onReady() {
        return __awaiter(this, void 0, void 0, function* () { });
    },
    onShow: function () { },
    onHide: function () { },
    onShareAppMessage: function (res) {
        const that = this;
        if (res.from === "button")
            console.log(res.target);
        return {
            title: "转发红包",
            query: {
                activeType: that.data.activeType,
            },
            imageUrl: "/images/share/zhuan.png",
            path: `/receiveRedp/receiveRedp?question=${that.data.question}&quesList=${that.data.quesList}&nickName=${that.data.userInfo.nickname}&avaUrl=${that.data.userInfo.avatarUrl}&redid=${that.data.redid}&activeType=${that.data.activeType}&actionType=${that.data.actionType}`,
            success: (res) => console.log("转发成功:" + JSON.stringify(res)),
            fail: (res) => console.log("转发失败:" + JSON.stringify(res)),
        };
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2hhcmVSZWRwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic2hhcmVSZWRwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSwyQ0FBNEM7QUFHNUMsTUFBTSxHQUFHLEdBQUcsTUFBTSxFQUFFLENBQUM7QUFXckIsSUFBSSxDQUFzQztJQUN0QyxJQUFJLEVBQUU7UUFDRixVQUFVLEVBQUUsS0FBSztLQUNwQjtJQUdELEtBQUssRUFBRSxlQUFRLENBQUMsR0FBRyxFQUFFO1FBQ2pCLE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDekIsQ0FBQyxFQUFFLElBQUksQ0FBQztJQUdSLFVBQVUsRUFBRSxlQUFRLENBQUMsR0FBRyxFQUFFO1FBQ3RCLEVBQUUsQ0FBQyxRQUFRLENBQUM7WUFDUixHQUFHLEVBQUUsb0JBQW9CO1NBQzVCLENBQUMsQ0FBQztJQUNQLENBQUMsRUFBRSxJQUFJLENBQUM7SUFFUixJQUFJO1FBQ0EsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2xCLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVE7WUFBRSxPQUFPO1FBQ2hDLEVBQUUsQ0FBQyxVQUFVLENBQUM7WUFDVixHQUFHLEVBQUUscUNBQXFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxhQUFhLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxhQUFhLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsV0FBVyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLFVBQVUsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLGVBQWUsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLGVBQWUsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDM1EsSUFBSSxDQUFDLEdBQUc7Z0JBQ0osT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNyQixDQUFDO1NBQ0osQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVELE1BQU0sRUFBRSxVQUFVLE9BQWtDO1FBQ2hELE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUE7UUFDcEIsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2xCLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDVCxRQUFRLEVBQUU7Z0JBQ04sUUFBUSxFQUFFLE9BQU8sQ0FBQyxRQUFRO2dCQUMxQixTQUFTLEVBQUUsT0FBTyxDQUFDLE1BQU07YUFDNUI7WUFDRCxRQUFRLEVBQUUsT0FBTyxDQUFDLFFBQVE7WUFDMUIsUUFBUSxFQUFFLE9BQU8sQ0FBQyxRQUFRO1lBQzFCLFVBQVUsRUFBRSxRQUFRLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQztZQUN4QyxVQUFVLEVBQUUsQ0FBQyxPQUFPLENBQUMsVUFBVTtnQkFDM0IsQ0FBQyxDQUFDLFNBQVM7Z0JBQ1gsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDO1lBQ2xDLElBQUksRUFBRSxHQUFHLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQzNELEtBQUssRUFBRSxRQUFRLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQztTQU9qQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsYUFBYSxDQUFDO1lBQ2IsT0FBTyxDQUFDLEdBQUc7Z0JBRVAsSUFBSSxDQUFDLE9BQU8sQ0FBQztvQkFDVCxVQUFVLEVBQUUsR0FBRyxDQUFDLFVBQVU7b0JBQzFCLEtBQUssRUFBRSxHQUFHLEdBQUcsR0FBRyxDQUFDLFVBQVU7b0JBQzNCLE1BQU0sRUFBRSxHQUFHLEdBQUcsR0FBRyxDQUFDLFVBQVU7aUJBQy9CLENBQUMsQ0FBQztZQUNQLENBQUM7U0FDSixDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsYUFBYSxDQUFDO1lBQ2IsZUFBZSxFQUFFLElBQUk7WUFDckIsS0FBSyxFQUFFLENBQUMsaUJBQWlCLENBQUM7U0FDN0IsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQXlCRCxPQUFPLENBQUMsQ0FBTTtRQUNWLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzQixJQUFJLENBQUMsT0FBTyxDQUFDO1lBQ1QsTUFBTSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSTtTQUN4QixDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsUUFBUSxDQUFDLEdBQVE7UUFDYixPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2pCLEVBQUUsQ0FBQyxTQUFTLENBQUM7WUFDVCxLQUFLLEVBQUUsTUFBTTtZQUNiLElBQUksRUFBRSxNQUFNO1NBQ2YsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVLLE9BQU87OERBQUksQ0FBQztLQUFBO0lBRWxCLE1BQU0sRUFBRSxjQUFhLENBQUM7SUFFdEIsTUFBTSxFQUFFLGNBQWEsQ0FBQztJQUV0QixpQkFBaUIsRUFBRSxVQUFVLEdBQUc7UUFDNUIsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2xCLElBQUksR0FBRyxDQUFDLElBQUksS0FBSyxRQUFRO1lBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDbkQsT0FBTztZQUNILEtBQUssRUFBRSxNQUFNO1lBQ2IsS0FBSyxFQUFFO2dCQUNILFVBQVUsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVU7YUFDbkM7WUFDRCxRQUFRLEVBQUUseUJBQXlCO1lBRW5DLElBQUksRUFBRSxxQ0FDRixJQUFJLENBQUMsSUFBSSxDQUFDLFFBQ2QsYUFBYSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsYUFDMUIsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFnQixDQUFDLFFBQ2hDLFdBQVksSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFnQixDQUFDLFNBQVMsVUFDNUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUNkLGVBQWUsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLGVBQy9CLElBQUksQ0FBQyxJQUFJLENBQUMsVUFDZCxFQUFFO1lBRUYsT0FBTyxFQUFFLENBQUMsR0FBUSxFQUFFLEVBQUUsQ0FDbEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUM5QyxJQUFJLEVBQUUsQ0FBQyxHQUFRLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDakUsQ0FBQztJQUNOLENBQUM7Q0FDSixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0aHJvdHRsZSB9IGZyb20gXCIuLi8uLi91dGlscy91dGlsXCI7XHJcbi8vIGltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi9jYXJkL2NhcmRcIjtcclxuLy8gaW1wb3J0IHsgc2F2ZUltYWdlVG9QaG90b3NBbGJ1bUJ5V1ggfSBmcm9tIFwiLi4vLi4vdXRpbHMvdXRpbFwiO1xyXG5jb25zdCBhcHAgPSBnZXRBcHAoKTtcclxuaW50ZXJmYWNlIElEYXRhIHtcclxuICAgIHF1ZXN0aW9uPzogc3RyaW5nO1xyXG4gICAgcXVlc0xpc3Q/OiBzdHJpbmcgfCB1bmRlZmluZWQ7XHJcbiAgICB1c2VySW5mbz86IHsgbmlja25hbWU6IHN0cmluZzsgYXZhdGFyVXJsOiBzdHJpbmcgfTtcclxuICAgIHJlbmRlck92ZXI6IGJvb2xlYW47XHJcbiAgICByZWRpZD86IG51bWJlcjtcclxuICAgIGFjdGl2ZVR5cGU/OiBudW1iZXI7XHJcbiAgICBhY3Rpb25UeXBlPzogbnVtYmVyIHwgdW5kZWZpbmVkO1xyXG4gICAgaW1ndXJsPzogc3RyaW5nO1xyXG59XHJcblBhZ2U8SURhdGEsIFdlY2hhdE1pbmlwcm9ncmFtLklBbnlPYmplY3Q+KHtcclxuICAgIGRhdGE6IHtcclxuICAgICAgICByZW5kZXJPdmVyOiBmYWxzZSxcclxuICAgIH0sXHJcblxyXG4gICAgLy/liIbkuqvnuqLljIXvvJrkvb/nlKjoioLmtYHvvIzml7bpl7TkuLoxc1xyXG4gICAgc2hhcmU6IHRocm90dGxlKCgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInNoYXJlXCIpO1xyXG4gICAgfSwgMTAwMCksXHJcblxyXG4gICAgLy/ljrvlj5HpgIHmlrDnuqLljIXvvJrkvb/nlKjoioLmtYHvvIzml7bpl7TkuLoxc1xyXG4gICAgc2V0TmV3UmVkcDogdGhyb3R0bGUoKCkgPT4ge1xyXG4gICAgICAgIHd4LnJlTGF1bmNoKHtcclxuICAgICAgICAgICAgdXJsOiBcIi9wYWdlcy9pbmRleC9pbmRleFwiLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfSwgMTAwMCksXHJcblxyXG4gICAgdGVzdCgpIHtcclxuICAgICAgICBjb25zdCB0aGF0ID0gdGhpcztcclxuICAgICAgICBpZiAoIXRoYXQuZGF0YS51c2VySW5mbykgcmV0dXJuO1xyXG4gICAgICAgIHd4Lm5hdmlnYXRlVG8oe1xyXG4gICAgICAgICAgICB1cmw6IGAvcmVjZWl2ZVJlZHAvcmVjZWl2ZVJlZHA/cXVlc3Rpb249JHt0aGF0LmRhdGEucXVlc3Rpb259JnF1ZXNMaXN0PSR7dGhhdC5kYXRhLnF1ZXNMaXN0fSZuaWNrTmFtZT0ke3RoYXQuZGF0YS51c2VySW5mby5uaWNrbmFtZX0mYXZhVXJsPSR7dGhhdC5kYXRhLnVzZXJJbmZvLmF2YXRhclVybH0mcmVkaWQ9JHt0aGF0LmRhdGEucmVkaWR9JmFjdGl2ZVR5cGU9JHt0aGF0LmRhdGEuYWN0aXZlVHlwZX0mYWN0aW9uVHlwZT0ke3RoYXQuZGF0YS5hY3Rpb25UeXBlfWAsXHJcbiAgICAgICAgICAgIGZhaWwoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uIChvcHRpb25zOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2cob3B0aW9ucylcclxuICAgICAgICBjb25zdCB0aGF0ID0gdGhpcztcclxuICAgICAgICB0aGF0LnNldERhdGEoe1xyXG4gICAgICAgICAgICB1c2VySW5mbzoge1xyXG4gICAgICAgICAgICAgICAgbmlja25hbWU6IG9wdGlvbnMubmlja05hbWUsXHJcbiAgICAgICAgICAgICAgICBhdmF0YXJVcmw6IG9wdGlvbnMuYXZhVXJsLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBxdWVzdGlvbjogb3B0aW9ucy5xdWVzdGlvbixcclxuICAgICAgICAgICAgcXVlc0xpc3Q6IG9wdGlvbnMucXVlc0xpc3QsXHJcbiAgICAgICAgICAgIGFjdGl2ZVR5cGU6IHBhcnNlSW50KG9wdGlvbnMuYWN0aXZlVHlwZSksXHJcbiAgICAgICAgICAgIGFjdGlvblR5cGU6ICFvcHRpb25zLmFjdGlvblR5cGVcclxuICAgICAgICAgICAgICAgID8gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICA6IHBhcnNlSW50KG9wdGlvbnMuYWN0aW9uVHlwZSksXHJcbiAgICAgICAgICAgIHR5cGU6IGFwcC5nbG9iYWxEYXRhLnR5cGVMaXN0W3BhcnNlSW50KG9wdGlvbnMuYWN0aXZlVHlwZSldLFxyXG4gICAgICAgICAgICByZWRpZDogcGFyc2VJbnQob3B0aW9ucy5yZWRpZCksXHJcbiAgICAgICAgICAgIC8vIHRlbXBsYXRlOiBuZXcgQ2FyZCgpLnBhbGV0dGUoe1xyXG4gICAgICAgICAgICAvLyAgIFwiYXZhVXJsXCI6IG9wdGlvbnMuYXZhVXJsLFxyXG4gICAgICAgICAgICAvLyAgIFwibmlja05hbWVcIjogXCLmnajnm5vmt4dcIixcclxuICAgICAgICAgICAgLy8gICBcIm1pZEltZ1VybFwiOiBgaHR0cHM6Ly93ZWl4aW5yZWRwYWNrZXQtMTI1ODM0NDcwNy5maWxlLm15cWNsb3VkLmNvbS9tb2JpbGVuZXQvc3RhdGljLyR7bWFwW29wdGlvbnMuYWN0aXZlVHlwZV19X3JlYy5wbmdgLFxyXG4gICAgICAgICAgICAvLyAgIFwicXJjb2RlVXJsXCI6IGBodHRwczovL3dlaXhpbnJlZHBhY2tldC0xMjU4MzQ0NzA3LmZpbGUubXlxY2xvdWQuY29tL21vYmlsZW5ldC9zdGF0aWMvJHttYXBbb3B0aW9ucy5hY3RpdmVUeXBlXX1fcmVjLnBuZ2BcclxuICAgICAgICAgICAgLy8gfSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgd3guZ2V0U3lzdGVtSW5mbyh7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3MocmVzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDpgJrov4flg4/ntKDmr5TorqHnrpflh7rnlLvluIPnmoTlrp7pmYXlpKflsI/vvIgzMzB4NDkw77yJ5piv5bGV56S655qE5Ye65p2l55qE5aSn5bCPXHJcbiAgICAgICAgICAgICAgICB0aGF0LnNldERhdGEoe1xyXG4gICAgICAgICAgICAgICAgICAgIHBpeGVsUmF0aW86IHJlcy5waXhlbFJhdGlvLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyODUgKiByZXMucGl4ZWxSYXRpbyxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDQwMCAqIHJlcy5waXhlbFJhdGlvLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHd4LnNob3dTaGFyZU1lbnUoe1xyXG4gICAgICAgICAgICB3aXRoU2hhcmVUaWNrZXQ6IHRydWUsXHJcbiAgICAgICAgICAgIG1lbnVzOiBbXCJzaGFyZUFwcE1lc3NhZ2VcIl0sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHNhdmVJbWcoKSB7XHJcbiAgICAvLyAgICAgY29uc3QgdGhhdCA9IHRoaXM7XHJcbiAgICAvLyAgICAgd3guZ2V0U2V0dGluZyh7XHJcbiAgICAvLyAgICAgICAgIC8v5p+l55yL5L+d5a2Y5Zu+54mH5p2D6ZmQXHJcbiAgICAvLyAgICAgICAgIHN1Y2Nlc3M6IChyZXMpID0+IHtcclxuICAgIC8vICAgICAgICAgICAgIGlmICghcmVzLmF1dGhTZXR0aW5nW1wic2NvcGUud3JpdGVQaG90b3NBbGJ1bVwiXSkge1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIHd4LmF1dGhvcml6ZSh7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIHNjb3BlOiBcInNjb3BlLndyaXRlUGhvdG9zQWxidW1cIixcclxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogKCkgPT4ge1xyXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUltYWdlVG9QaG90b3NBbGJ1bUJ5V1godGhhdC5kYXRhLmltZ3VybCk7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIGZhaWw6ICgpID0+IHtcclxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIHd4LnNob3dUb2FzdCh7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogXCJub25lXCIsXHJcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfor7flhYjov5vooYxcIuS/neWtmOWbvueJh1wi5o6I5p2D5ZOmJyxcclxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgLy8gICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgLy8gICAgICAgICAgICAgfSBlbHNlIHNhdmVJbWFnZVRvUGhvdG9zQWxidW1CeVdYKHRoYXQuZGF0YS5pbWd1cmwpO1xyXG4gICAgLy8gICAgICAgICB9LFxyXG4gICAgLy8gICAgIH0pO1xyXG4gICAgLy8gfSxcclxuXHJcbiAgICBvbkltZ09LKGU6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGUuZGV0YWlsLnBhdGgpO1xyXG4gICAgICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgICAgICAgIGltZ3VybDogZS5kZXRhaWwucGF0aCxcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgb25JbWdFcnIoZXJyOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIHd4LnNob3dUb2FzdCh7XHJcbiAgICAgICAgICAgIHRpdGxlOiBcIueUn+aIkOWksei0pVwiLFxyXG4gICAgICAgICAgICBpY29uOiBcIm5vbmVcIixcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgYXN5bmMgb25SZWFkeSgpIHt9LFxyXG5cclxuICAgIG9uU2hvdzogZnVuY3Rpb24gKCkge30sXHJcblxyXG4gICAgb25IaWRlOiBmdW5jdGlvbiAoKSB7fSxcclxuXHJcbiAgICBvblNoYXJlQXBwTWVzc2FnZTogZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGlmIChyZXMuZnJvbSA9PT0gXCJidXR0b25cIikgY29uc29sZS5sb2cocmVzLnRhcmdldCk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdGl0bGU6IFwi6L2s5Y+R57qi5YyFXCIsXHJcbiAgICAgICAgICAgIHF1ZXJ5OiB7XHJcbiAgICAgICAgICAgICAgICBhY3RpdmVUeXBlOiB0aGF0LmRhdGEuYWN0aXZlVHlwZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaW1hZ2VVcmw6IFwiL2ltYWdlcy9zaGFyZS96aHVhbi5wbmdcIixcclxuXHJcbiAgICAgICAgICAgIHBhdGg6IGAvcmVjZWl2ZVJlZHAvcmVjZWl2ZVJlZHA/cXVlc3Rpb249JHtcclxuICAgICAgICAgICAgICAgIHRoYXQuZGF0YS5xdWVzdGlvblxyXG4gICAgICAgICAgICB9JnF1ZXNMaXN0PSR7dGhhdC5kYXRhLnF1ZXNMaXN0fSZuaWNrTmFtZT0ke1xyXG4gICAgICAgICAgICAgICAgKHRoYXQuZGF0YS51c2VySW5mbyBhcyBhbnkpLm5pY2tuYW1lXHJcbiAgICAgICAgICAgIH0mYXZhVXJsPSR7KHRoYXQuZGF0YS51c2VySW5mbyBhcyBhbnkpLmF2YXRhclVybH0mcmVkaWQ9JHtcclxuICAgICAgICAgICAgICAgIHRoYXQuZGF0YS5yZWRpZFxyXG4gICAgICAgICAgICB9JmFjdGl2ZVR5cGU9JHt0aGF0LmRhdGEuYWN0aXZlVHlwZX0mYWN0aW9uVHlwZT0ke1xyXG4gICAgICAgICAgICAgICAgdGhhdC5kYXRhLmFjdGlvblR5cGVcclxuICAgICAgICAgICAgfWAsXHJcblxyXG4gICAgICAgICAgICBzdWNjZXNzOiAocmVzOiBhbnkpID0+XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIui9rOWPkeaIkOWKnzpcIiArIEpTT04uc3RyaW5naWZ5KHJlcykpLFxyXG4gICAgICAgICAgICBmYWlsOiAocmVzOiBhbnkpID0+IGNvbnNvbGUubG9nKFwi6L2s5Y+R5aSx6LSlOlwiICsgSlNPTi5zdHJpbmdpZnkocmVzKSksXHJcbiAgICAgICAgfTtcclxuICAgIH0sXHJcbn0pO1xyXG4iXX0=